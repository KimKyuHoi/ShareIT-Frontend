{"ast":null,"code":"import { createRenderStep } from './render-step.mjs';\nvar stepsOrder = [\"prepare\", \"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n  var runNextFrame = false;\n  var useDefaultElapsed = true;\n  var state = {\n    delta: 0,\n    timestamp: 0,\n    isProcessing: false\n  };\n  var steps = stepsOrder.reduce(function (acc, key) {\n    acc[key] = createRenderStep(function () {\n      return runNextFrame = true;\n    });\n    return acc;\n  }, {});\n  var processStep = function processStep(stepId) {\n    return steps[stepId].process(state);\n  };\n  var processBatch = function processBatch(timestamp) {\n    runNextFrame = false;\n    state.delta = useDefaultElapsed ? 1000 / 60 : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n    state.timestamp = timestamp;\n    state.isProcessing = true;\n    stepsOrder.forEach(processStep);\n    state.isProcessing = false;\n    if (runNextFrame && allowKeepAlive) {\n      useDefaultElapsed = false;\n      scheduleNextBatch(processBatch);\n    }\n  };\n  var wake = function wake() {\n    runNextFrame = true;\n    useDefaultElapsed = true;\n    if (!state.isProcessing) scheduleNextBatch(processBatch);\n  };\n  var schedule = stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process) {\n      var keepAlive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (!runNextFrame) wake();\n      return step.schedule(process, keepAlive, immediate);\n    };\n    return acc;\n  }, {});\n  var cancel = function cancel(process) {\n    return stepsOrder.forEach(function (key) {\n      return steps[key].cancel(process);\n    });\n  };\n  return {\n    schedule: schedule,\n    cancel: cancel,\n    state: state,\n    steps: steps\n  };\n}\nexport { createRenderBatcher, stepsOrder };","map":{"version":3,"names":["createRenderStep","stepsOrder","maxElapsed","createRenderBatcher","scheduleNextBatch","allowKeepAlive","runNextFrame","useDefaultElapsed","state","delta","timestamp","isProcessing","steps","reduce","acc","key","processStep","stepId","process","processBatch","Math","max","min","forEach","wake","schedule","step","keepAlive","arguments","length","undefined","immediate","cancel"],"sources":["C:/Users/k546k/Desktop/멋쟁이사자/쉐어잇/shareit_frontend/node_modules/framer-motion/dist/es/frameloop/batcher.mjs"],"sourcesContent":["import { createRenderStep } from './render-step.mjs';\r\n\r\nconst stepsOrder = [\r\n    \"prepare\",\r\n    \"read\",\r\n    \"update\",\r\n    \"preRender\",\r\n    \"render\",\r\n    \"postRender\",\r\n];\r\nconst maxElapsed = 40;\r\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\r\n    let runNextFrame = false;\r\n    let useDefaultElapsed = true;\r\n    const state = {\r\n        delta: 0,\r\n        timestamp: 0,\r\n        isProcessing: false,\r\n    };\r\n    const steps = stepsOrder.reduce((acc, key) => {\r\n        acc[key] = createRenderStep(() => (runNextFrame = true));\r\n        return acc;\r\n    }, {});\r\n    const processStep = (stepId) => steps[stepId].process(state);\r\n    const processBatch = (timestamp) => {\r\n        runNextFrame = false;\r\n        state.delta = useDefaultElapsed\r\n            ? 1000 / 60\r\n            : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\r\n        state.timestamp = timestamp;\r\n        state.isProcessing = true;\r\n        stepsOrder.forEach(processStep);\r\n        state.isProcessing = false;\r\n        if (runNextFrame && allowKeepAlive) {\r\n            useDefaultElapsed = false;\r\n            scheduleNextBatch(processBatch);\r\n        }\r\n    };\r\n    const wake = () => {\r\n        runNextFrame = true;\r\n        useDefaultElapsed = true;\r\n        if (!state.isProcessing)\r\n            scheduleNextBatch(processBatch);\r\n    };\r\n    const schedule = stepsOrder.reduce((acc, key) => {\r\n        const step = steps[key];\r\n        acc[key] = (process, keepAlive = false, immediate = false) => {\r\n            if (!runNextFrame)\r\n                wake();\r\n            return step.schedule(process, keepAlive, immediate);\r\n        };\r\n        return acc;\r\n    }, {});\r\n    const cancel = (process) => stepsOrder.forEach((key) => steps[key].cancel(process));\r\n    return { schedule, cancel, state, steps };\r\n}\r\n\r\nexport { createRenderBatcher, stepsOrder };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}